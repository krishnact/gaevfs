#summary The Combined Local option of GaeVFS allows you to reference either local or virtual file system resources without specifying the file system scheme.

= Introduction =

Apache Commons VFS treats all file names as URIs. The scheme `file://` is used to reference files on the local file system; however, this is also the default scheme, so it may be omitted when referencing local file system resources. Examples of local file system URIs are (from the [http://commons.apache.org/vfs/filesystems.html Commons VFS documentation]):

  * `file:///home/someuser/somedir`
  * `file:///C:/Documents and Settings`
  * `file://///somehost/someshare/afile.txt`
  * `/home/someuser/somedir`
  * `c:\program files\some dir`
  * `c:/program files/some dir`

The scheme `gae://` is used by GaeVFS to reference virtual file system resources. Examples of GaeVFS file system URIs are:

  * `gae:///home/someuser/somedir`
  * `gae:///C:/Documents and Settings`
  * `gae://///somehost/someshare/afile.txt`

The Combined Local option--which is enabled by default--combines the local and GaeVFS file systems to allow you to treat them as a single file system. Specifically, the Combined Local option:

  # allows you to reference either local or GaeVFS file system resources without specifying the `file://` or `gae://` schemes
  # allows both local and GaeVFS file systems resources to use the same parent directory paths
  # treats local file system resources as read-only, while providing both read and write access to GaeVFS file system resources
  # allows you to explicitly reference a file system by specifying the `file://` or `gae://` scheme within URIs

In summary, the Combined Local option of GaeVFS allows you to write code that references both local and GaeVFS file system resources without knowing or caring which file system actually contains the resources.

= Details =

The GaeVFS file system is initialized by invoking the `GaeVFS.getManager()` method, which returns a `GaeFileSystemManager` instance that implements the `FileSystemManager` interface. References to `GaeVFS.getManager()` always return the same static `GaeFileSystemManager` instance:

{{{
import org.apache.commons.vfs.*;
import com.newatlanta.commons.vfs.provider.gae.GaeVFS;
    .
    .
    FileSystemManager fsManager = GaeVFS.getManager();
    .
    .
}}}

The Combined Local option can be enabled or disabled at any time via the `GaeFileSystemManager.setCombinedLocal( boolean )` method, which return the `GaeFileSystemManager` instance to allow for method chaining.

The `FileSystemManager.resolveFile()` method, in it's various overloaded forms, is used to locate file system resources. If the Combined Local option is disabled, the `FileSystemManager.resolveFile()` method behaves exactly as described in the [http://commons.apache.org/vfs/apidocs/index.html Commons VFS API documentation]. That is, if the Combined Local option is disabled, you must specify the `gae://` scheme to reference GaeVFS file system resources, and may either specify or omit the `file://` scheme to reference local file system resources. For example:

{{{
    FileSystemManager fsManager = GaeVFS.getManager().setCombinedLocal( false );
    FileObject gaeFile = fsManager.resolveFile( "gae:///home/someuser/somedir/gfile.txt" ):
    FileObject localFile = fsManager.resolveFile( "file:///home/someuser/somedir/afile.txt" );
    FileObject anotherLocalFile = fsManager.resolveFile( "/home/someuser/somedir/bfile.txt" );
}}}

If the Combined Local option is enabled--which is the default--then you may omit the scheme and `FileSystemManager.resolveFile()` will search both the local file system and the GaeVFS file system when searching for files.